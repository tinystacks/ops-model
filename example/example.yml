Console:
  name: TinyStacks example
  providers:
    AwsLocalProvider:
      type: AwsProfileProvider
      credentials:
        profileName: ts-dev
  pages:
    MainPage:
      route: /
      widgets: 
        - $ref: '#/Console/widgets/PrimaryServiceHealth'
        - $ref: '#/Console/widgets/MainPageTabPanel'
  widgets:
    PrimaryServiceHealth:
      type: "AwsCloudWatchMetricGraph"
      displayName: Service Health (system memory)
      awsProviderId: AwsLocalProvider
      showTimeRangeSelector: false
      showPeriodSelector: false
      showStatisticSelector: false
      metrics:
        - metricDisplayName: Synth Memory Util
          metricName: MemoryUtilized
          metricNamespace: ECS/ContainerInsights
          dimensions:
            - key: ClusterName
              value: cdk-synth-cluster
            - key: ServiceName
              value: tinystacks-service
      region: us-east-1
    MainPageTabPanel:
      type: "TabPanel"
      tabs:
        LogsTab:
          tabDisplayName: Logs
          widgets: 
            - $ref: '#/Console/widgets/ServiceLogsContainer'
        EcsTab:
          tabDisplayName: ECS
          widgets: 
            - $ref: '#/Console/widgets/SynthEcsServiceDeployments_1'
            - $ref: '#/Console/widgets/SynthEcsServiceDeployments_2'
            - $ref: '#/Console/widgets/SynthEcsServiceDeployments_3'
    ServiceLogsContainer:
      type: "AwsCloudWatchLogViewer"
      displayName: Service Logs
      awsProviderId: AwsLocalProvider
      logGroupId: TinyStacks-CustomerStackManagementService-cdksynthtstaskcdksynthcontainerLogGroup0B5FD78A-6nRF4fBxmCGy
      defaultTimeRange:
        time: 5
        unit: m
    SynthEcsServiceDeployments_1:
      type: "AwsEcsSeviceSummary"
      displayName: Service Logs
      awsProviderId: AwsLocalProvider
      clusterName: cdk-synth-cluster
      serviceName: tinystacks-service
    SynthEcsServiceDeployments_2:
      type: "AwsEcsServiceDeployments"
      displayName: Service Logs
      awsProviderId: AwsLocalProvider
      clusterName: cdk-synth-cluster
      serviceName: tinystacks-service
      showTaskDetails: true
      showPermissions: true
      tabbedView: false
    SynthEcsServiceDeployments_3:
      type: "AwsCloudWatchAlarmsStatus"
      alarmIds:
        - cpu-over
        - out-of-mem
        - scaling
        - latency
      awsProviderId: AwsLocalProvider
      showTaskDetails: true
      showPermissions: true
      tabbedView: false